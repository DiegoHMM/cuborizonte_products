name: bh_lidar_rasterized
description: >
  Produto raster derivado de dados LiDAR aéreo para a região de Belo Horizonte,
  contendo camadas de elevação, intensidade e classificações binárias individuais.
  Processado através de um pipeline avançado que inclui:
  
  1. Pré-processamento:
     - Filtragem inicial por classificação (0-20) usando PDAL
     - Remoção de outliers estatísticos (pontos com z-score > 3)
     - Normalização das intensidades
  
  2. Interpolação adaptativa:
     - Para datasets grandes (>100.000 pontos): Processamento por blocos de 500x500 pixels
       com interpolação linear local.
     - Para datasets menores: Interpolação baseada em KDTree com busca por 10 vizinhos
       mais próximos e distância máxima de 2.0 unidades
  
  3. Pós-processamento:
     - Preenchimento de áreas vazias usando difusão anisotrópica iterativa (máx. 5 iterações)
     - Filtragem mediana (kernel 3x3) aplicada seletivamente em áreas interpoladas
     - Classificações binárias geradas por método do vizinho mais próximo
metadata_type: eo3
license: CC-BY-4.0

metadata:
  product:
    name: bh_lidar_rasterized
    layers_description: |
      Banda 1: Elevação (metros)
      Banda 2: Intensidade (DN)
      Bandas 3-22: Classificações binárias (0=ausente, 1=presente)

storage:
  crs: EPSG:31983
  resolution:
    x: 0.8  # Atualizado para refletir a resolução do seu código
    y: -0.8

measurements:
  - name: elevation
    dtype: float32
    units: "meters"
    nodata: -9999  # Valor mais comum para dados de elevação
    description: "Altura do terreno em metros relativos ao datum vertical"

  - name: intensity
    dtype: float32
    units: "DN"
    nodata: 0
    description: "Intensidade do retorno LiDAR (valores normalizados)"

# Definição das bandas de classificação
class_bands:
  - name: class_created_never_classified
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Created, never classified (binário: 0=ausente, 1=presente)"

  - name: class_unclassified
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Unclassified (binário: 0=ausente, 1=presente)"

  - name: class_ground
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Ground (binário: 0=ausente, 1=presente)"

  - name: class_low_vegetation
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Low Vegetation (binário: 0=ausente, 1=presente)"

  - name: class_medium_vegetation
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Medium Vegetation (binário: 0=ausente, 1=presente)"

  - name: class_high_vegetation
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "High Vegetation (binário: 0=ausente, 1=presente)"

  - name: class_building
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Building (binário: 0=ausente, 1=presente)"

  - name: class_low_point_noise
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Low Point (Noise) (binário: 0=ausente, 1=presente)"

  - name: class_model_key_point
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Model Key Point (Mass Point) (binário: 0=ausente, 1=presente)"

  - name: class_water
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Water (binário: 0=ausente, 1=presente)"

  - name: class_overlap_points
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Overlap Points (binário: 0=ausente, 1=presente)"

  - name: class_reserved_asprs_13
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Reserved for ASPRS Definition (binário: 0=ausente, 1=presente)"

  - name: class_wire
    dtype: uint8
    units: "binary"
    nodata: 255
    description: "Wire (binário: 0=ausente, 1=presente)"
